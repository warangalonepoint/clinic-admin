<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ“Š Admin Dashboard</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <style>
    body {
      background-color: #000;
      color: white;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    h1 {
      font-size: 2rem;
      margin-bottom: 20px;
    }
    canvas {
      background-color: #111;
      padding: 20px;
      border-radius: 8px;
    }
    .btn-group {
      margin-bottom: 30px;
    }
    .btn {
      margin-right: 10px;
    }
  </style>
</head>
<body>
  <h1>ğŸ“‹ Dashboard</h1>
  <div class="btn-group">
    <a href="bookings.html" class="btn btn-primary">ğŸ“… Bookings</a>
    <a href="staff.html" class="btn btn-warning">ğŸ‘¨â€âš•ï¸ Staff</a>
    <a href="sync.html" class="btn btn-secondary">ğŸ” Sync</a>
    <a href="backup.html" class="btn btn-info">ğŸ’¾ Backup</a>
    <a href="pin-reset.html" class="btn btn-success">ğŸ” Reset PIN</a>
  </div>  <h2>ğŸ“Š Appointment Analytics</h2>
  <canvas id="appointmentChart" width="400" height="300"></canvas>  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>  <script>
    async function loadAndRenderChart() {
      const response = await fetch("https://warangalonepoint.github.io/clinic-admin/logs.csv");
      const csv = await response.text();
      const lines = csv.trim().split("\n").slice(1); // skip header
      const counts = Array(12).fill(0); // 9AM to 8PM => 12 slots

      lines.forEach(row => {
        const cols = row.split(",");
        const time = cols[1]?.trim();
        if (time) {
          const hour = parseInt(time.split(":")[0]);
          if (hour >= 9 && hour <= 20) {
            counts[hour - 9]++;
          }
        }
      });

      const ctx = document.getElementById("appointmentChart").getContext("2d");
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ["9AM", "10AM", "11AM", "12PM", "1PM", "2PM", "3PM", "4PM", "5PM", "6PM", "7PM", "8PM"],
          datasets: [{
            label: "Appointments by Hour",
            data: counts,
            backgroundColor: "dodgerblue"
          }]
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
      });
    }
    loadAndRenderChart();
  </script></body>
</html>
